import { z } from "zod";
import type { FieldConfig } from "@/lib/types";

// Demo: cấu hình grid cho form (3 cột)
export const fullDemoFormConfig: FieldConfig[] & { gridColumns?: number } = [
  {
    name: "price",
    type: "currency",
    label: "Giá tiền",
    placeholder: "Nhập giá",
    description: "Nhập giá sản phẩm bằng VNĐ. Ví dụ: 100000",
    defaultValue: 100000,
    unit: "₫",
    zodSchema: z.coerce.number().min(0, "Giá phải >= 0"),
    buttonAfter: {
      label: "Giảm 10%",
      variant: "secondary",
      onClick: (formValues) => {
        alert(`Giá sau giảm: ${Number(formValues.price) * 0.9}`);
      },
    },
    className: "col-span-4 @lg:col-span-2",
  },
  {
    name: "discount",
    type: "percentage",
    label: "Giảm giá (%)",
    placeholder: "Nhập phần trăm giảm giá",
    description: "Nhập phần trăm giảm giá từ 0 đến 100. Ví dụ: 10, 20, 50...",
    defaultValue: 10,
    zodSchema: z.coerce.number().min(0).max(100, "Tối đa 100%"),
    buttonAfter: {
      label: "Đặt về 0%",
      variant: "secondary",
      onClick: (formValues) => {
        alert(`Giảm giá đã reset về 0%`);
      },
    },
    className: "col-span-4 @lg:col-span-2",
  },
  {
    name: "quantity",
    type: "number",
    label: "Số lượng",
    placeholder: "Nhập số lượng",
    description: "Nhập số lượng sản phẩm. Ví dụ: 1, 2, 3...",
    defaultValue: 1,
    zodSchema: z.coerce.number().min(1, "Số lượng phải lớn hơn 0"),
    buttonAfter: {
      label: "Tăng gấp đôi",
      variant: "secondary",
      onClick: (formValues) => {
        alert(`Số lượng x2: ${Number(formValues.quantity) * 2}`);
      },
    },
    className: "col-span-2",
  },
  {
    name: "avatar",
    type: "image-uploader",
    label: "Ảnh đại diện",
    placeholder: "Chọn ảnh đại diện",
    isMulti: false,
    accept: "image/*",
    defaultValue: null,
    zodSchema: z.any().optional(),
    className: "col-span-2",
  },
  {
    name: "thumbnail",
    type: "imagepicker",
    label: "Ảnh sản phẩm (Single)",
    placeholder: "Chọn ảnh từ thư viện hoặc nhập URL",
    description: "Chọn 1 ảnh thumbnail cho sản phẩm",
    showPreview: true,
    showImageInfo: true,
    multiple: false,
    defaultValue: null,
    zodSchema: z
      .object({
        id: z.string().optional(),
        url: z.string(),
        thumbnail: z.string().optional(),
        alt: z.string().optional(),
        width: z.number().optional(),
        height: z.number().optional(),
        size: z.number().optional(),
        format: z.string().optional(),
        source: z.enum(["gallery", "url", "upload"]).optional(),
      })
      .nullable()
      .optional(),
    className: "col-span-2",
  },
  {
    name: "productGallery",
    type: "imagepicker",
    label: "Thư viện ảnh sản phẩm (Multiple)",
    placeholder: "Chọn nhiều ảnh từ thư viện",
    description: "Chọn tối đa 5 ảnh cho gallery sản phẩm",
    showPreview: true,
    showImageInfo: true,
    multiple: true,
    maxImages: 5,
    minImages: 1,
    defaultValue: null,
    zodSchema: z
      .array(
        z.object({
          id: z.string().optional(),
          url: z.string(),
          thumbnail: z.string().optional(),
          alt: z.string().optional(),
          width: z.number().optional(),
          height: z.number().optional(),
          size: z.number().optional(),
          format: z.string().optional(),
          source: z.enum(["gallery", "url", "upload"]).optional(),
        })
      )
      .nullable()
      .optional(),
    className: "col-span-3",
  },
  {
    name: "gallery",
    type: "image-uploader",
    label: "Image Uploader (để so sánh)",
    placeholder: "Chọn nhiều ảnh upload",
    isMulti: true,
    accept: "image/*",
    defaultValue: null,
    zodSchema: z.any().optional(),
    className: "col-span-3",
  },
  {
    name: "documents",
    type: "file-uploader",
    label: "Tài liệu",
    placeholder: "Chọn file tài liệu",
    isMulti: true,
    accept: ".pdf,.doc,.docx",
    defaultValue: null,
    zodSchema: z.any().optional(),
    className: "col-span-1",
  },
  {
    name: "birthday",
    type: "date",
    label: "Ngày sinh",
    placeholder: "Chọn ngày sinh",
    defaultValue: null,
    zodSchema: z.date({ error: "Vui lòng chọn ngày sinh" }),
    className: "col-span-2",
  },
  {
    name: "isActive",
    type: "switch",
    label: "Kích hoạt tài khoản",
    defaultValue: false,
    zodSchema: z.boolean(),
  },
  {
    type: "spacer",
    className: "col-span-2",
    name: "spacer1",
  },
  {
    name: "name",
    type: "text",
    label: "Tên",
    placeholder: "Nhập tên của bạn",
    description: "Nhập tên đầy đủ của bạn.",
    zodSchema: z.string().min(2, "Tên phải có ít nhất 2 ký tự"),
    className: "col-span-2",
  },
  {
    name: "email",
    type: "email",
    label: "Email",
    placeholder: "Nhập email",
    description: "Nhập địa chỉ email hợp lệ.",
    zodSchema: z.email("Email không hợp lệ"),
    buttonAfter: {
      label: "Kiểm tra",
      variant: "default",
      onClick: (formValues) => {
        alert(`Kiểm tra email: ${formValues.email}`);
      },
    },
    className: "col-span-3",
  },
  {
    name: "password",
    type: "password",
    label: "Mật khẩu",
    placeholder: "Nhập mật khẩu",
    description: "Nhập mật khẩu có ít nhất 6 ký tự.",
    zodSchema: z.string().min(6, "Mật khẩu phải có ít nhất 6 ký tự"),
    className: "col-span-2",
  },
  {
    name: "bio",
    type: "textarea",
    label: "Giới thiệu",
    placeholder: "Giới thiệu về bản thân",
    description: "Viết một đoạn giới thiệu ngắn về bản thân bạn.",
    zodSchema: z.string(),
    className: "col-span-2 row-span-2",
  },
  {
    name: "website",
    type: "url",
    label: "Website",
    placeholder: "https://example.com",
    description: "Nhập địa chỉ website cá nhân hoặc công việc.",
    zodSchema: z.url("URL không hợp lệ"),
    buttonAfter: {
      label: "Mở",
      variant: "secondary",
      onClick: (formValues) => {
        window.open(formValues.website as string, "_blank");
      },
    },
    className: "col-span-2",
  },
  {
    name: "phone",
    type: "tel",
    label: "Số điện thoại",
    placeholder: "Nhập số điện thoại",
    description: "Nhập số điện thoại liên hệ của bạn.",
    zodSchema: z.string().min(8, "Số điện thoại không hợp lệ"),
  },
  {
    name: "role",
    type: "select-single",
    label: "Vai trò",
    placeholder: "Chọn vai trò...",
    options: [
      { label: "Admin", value: "admin" },
      { label: "Editor", value: "editor" },
      { label: "Viewer", value: "viewer" },
    ],
    zodSchema: z.string().min(1, "Vui lòng chọn vai trò"),
  },
  {
    name: "skills",
    type: "select-multi",
    label: "Kỹ năng",
    placeholder: "Chọn kỹ năng...",
    options: [
      { label: "React", value: "react" },
      { label: "TypeScript", value: "typescript" },
      { label: "Next.js", value: "nextjs" },
      { label: "Node.js", value: "nodejs" },
      { label: "Python", value: "python" },
      { label: "Docker", value: "docker" },
    ],
    zodSchema: z.array(z.string()).min(1, "Chọn ít nhất 1 kỹ năng"),
    className: "col-span-3",
  },
  {
    name: "profile",
    type: "group",
    label: "Thông tin cá nhân",
    className: "col-span-3",
    gridColumns: 4,
    fields: [
      {
        name: "bio",
        type: "text",
        label: "Giới thiệu",
        placeholder: "Giới thiệu về bản thân",
        zodSchema: z.string().min(1, "kljhvdfnj"),
        className: "col-span-3",
      },
      {
        name: "website",
        type: "url",
        label: "Website",
        placeholder: "https://example.com",
        zodSchema: z.url("URL không hợp lệ"),
        className: "col-span-1",
      },
    ],
  },
  {
    name: "links",
    type: "array",
    label: "Danh sách Liên kết",
    fields: [
      {
        name: "url",
        type: "url",
        label: "URL",
        placeholder: "https://example.com",
        zodSchema: z.url("URL không hợp lệ"),
      },
      {
        name: "desc",
        type: "textarea",
        label: "Mô tả",
        placeholder: "Nhập mô tả",
        zodSchema: z.string().optional(),
      },
    ],
    arrayConfig: {
      itemLabel: (item, idx) => `Liên kết #${idx + 1}`,
      keyName: "uuid",
      actions: ["remove"],
      arraySchema(schema) {
        return schema.min(1, "Phải có ít nhất 1 liên kết");
      },
    },
    className: "col-span-3",
  },
  {
    type: "spacer",
    className: "col-span-1",
    name: "spacer2",
  },
  {
    name: "isActive",
    type: "checkbox",
    label: "Kích hoạt sản phẩm",
    description: "Chọn để kích hoạt sản phẩm này.",
    defaultValue: true,
    zodSchema: z.boolean(),
  },
  {
    name: "eventTime",
    type: "datetime",
    label: "Thời gian sự kiện",
    description: "Chọn ngày giờ diễn ra sự kiện.",
    defaultValue: "2025-12-01T09:00",
    zodSchema: z.string().min(1, "Vui lòng chọn ngày giờ"),
    className: "col-span-2",
  },
  {
    name: "remindAt",
    type: "time",
    label: "Giờ nhắc nhở",
    description: "Chọn giờ nhắc nhở mỗi ngày.",
    defaultValue: "08:00",
    zodSchema: z.string().min(1, "Vui lòng chọn giờ"),
  },
  {
    name: "brandColor",
    type: "color",
    label: "Màu thương hiệu",
    description: "Chọn màu đại diện cho thương hiệu sản phẩm.",
    defaultValue: "#3b82f6",
    zodSchema: z.string().regex(/^#[0-9A-Fa-f]{6}$/, "Màu không hợp lệ"),
    className: "col-span-2 md:col-span-1",
  },
  {
    type: "spacer",
    className: "col-span-2",
    name: "spacer3",
  },
  {
    name: "quality",
    type: "slider",
    label: "Chất lượng",
    description: "Đánh giá chất lượng sản phẩm (0-100).",
    defaultValue: 80,
    suffix: "/100",
    zodSchema: z.coerce.number().min(0).max(100),
    customUI: {
      min: 0,
      max: 100,
      step: 1,
    },
    className: "col-span-2",
  },
  {
    name: "priceRange",
    type: "range",
    label: "Khoảng giá mong muốn",
    description: "Chọn khoảng giá bạn muốn tìm kiếm (VNĐ).",
    defaultValue: { from: 100000, to: 500000 },
    suffix: " VNĐ",
    zodSchema: z.object({
      from: z.number().min(0),
      to: z.number().max(1000000),
    }),
    customUI: {
      min: 0,
      max: 1000000,
      step: 10000,
    },
    className: "col-span-2 lg:col-span-3",
  },
];
